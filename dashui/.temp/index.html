<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Codescandy">


<!-- Favicon icon-->
<link rel="shortcut icon" type="image/x-icon" href="https://www.panel.neodogma.com/imagenes/dogma-logo-favicon.ico">


<!-- Libs CSS -->
<link href="./node_modules/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link href="./node_modules/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet">
<link href="./node_modules/simplebar/dist/simplebar.min.css" rel="stylesheet">



<!-- Theme CSS -->
<!-- build:css ./assets/css/theme.min.css -->
<link rel="stylesheet" href="./assets/css/theme.css">
<!-- endbuild -->
    <title>NeoDogma | Panel de Control</title>
	<script>
		console.log("Token en almacenamiento local:", localStorage.getItem("tokenUsuario"));
        if (!localStorage.getItem("tokenUsuario")) {
            window.location.href = 'pages/login.html';
        }
    </script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>
    <main id="main-wrapper" class="main-wrapper">

        <div class="header">
  <!-- navbar -->
  <div class="navbar-custom navbar navbar-expand-lg">
    <div class="container-fluid px-0">
		<a class="navbar-brand d-block d-md-none" href="./index.html">
		  <img src="./assets/images/brand/logo/logo-2.svg" alt="Image">
		</a>
		<a id="nav-toggle" href="#!" class="ms-auto ms-md-0 me-0 me-lg-3 ">
		  <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-text-indent-left text-muted" viewBox="0 0 16 16">
			<path d="M2 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm.646 2.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L4.293 8 2.646 6.354a.5.5 0 0 1 0-.708zM7 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm-5 3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
		  </svg>
		</a>

    <!--Navbar nav -->
    <ul class="navbar-nav navbar-right-wrap ms-lg-auto d-flex nav-top-wrap align-items-center ms-4 ms-lg-0">
		<a href="#" class="form-check form-switch theme-switch btn btn-ghost btn-icon rounded-circle mb-0 ">
			<input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
			<label class="form-check-label" for="flexSwitchCheckDefault"></label>
		</a>
		<div>
            <a href="#" id="cerrar-sesion" class="btn btn-white" style="border: 1px solid #d0d0d0;margin-left: 10px;" data-translate="Logout">Cerrar Sesión</a>
        </div>
    </ul>
    </div>
  </div>
</div>

    <script>
        var licenciaProfe = localStorage.getItem("licenciaProfe");
		var nombreProfe = localStorage.getItem("nombreProfe");
		var centroeducativoProfe = localStorage.getItem("centroeducativoProfe");
		var emailProfe = localStorage.getItem("emailProfe");
    </script>
	<script>
		function cerrarSesion() {
			localStorage.removeItem("tokenUsuario");
			window.location.href = '/src/pages/login.html';
		}

		document.addEventListener('DOMContentLoaded', function() {
			var botonCerrarSesion = document.getElementById('cerrar-sesion');
			if (botonCerrarSesion) {
				botonCerrarSesion.addEventListener('click', cerrarSesion);
			}
		});
	</script>
        <!-- navbar vertical -->
        <div class="app-menu">
         <!-- Sidebar -->

<div class="navbar-vertical navbar nav-dashboard">
    <div class="h-100" data-simplebar>
        <!-- Brand logo -->
        <a class="navbar-brand" href="./index.html">
            <img id="logopanel" src="/src/assets/images/brand/logo/NeoDogma_Logo.png" alt="dash ui - bootstrap 5 admin dashboard template">
        </a>
        <!-- Navbar nav -->
        <ul class="navbar-nav flex-column" id="sideNavbar">

            <!-- Nav item -->
            <li class="nav-item">
                <a class="nav-link  active " 
                    href="./index.html">
					<i data-feather="home" class="nav-icon me-2 icon-xxs"></i>
					<span data-translate="Home"> Inicio</span>
                </a>
            </li>
            <!-- Nav item
            <li class="nav-item">
                <a class="nav-link has-arrow "
                    href="./pages/calendar.html">
                    <i data-feather="calendar" class="nav-icon me-2 icon-xxs" ></i> Calendario
                </a>
            </li>
			<!-- Nav item -->
			<li class="nav-item ">
				<a
					class="nav-link   collapsed  "
					href="#!"
					data-bs-toggle="collapse"
					data-bs-target="#navProject"
					aria-expanded="false"
					aria-controls="navProject"
				>
					<i class="nav-icon me-2 icon-xxs" data-feather="file"></i>
					<span data-translate="Statistics"> Estadísticas</span>
				</a>
				<div id="navProject" class="collapse  " data-bs-parent="#sideNavbar">
					<ul class="nav flex-column">
						<li class="nav-item">
							<a class="nav-link " href="./pages/project-files.html">
								<span data-translate="Students">Alumnos</span>
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link " href="./pages/project-budget.html">
								<span data-translate="Group">Grupo</span>
							</a>
						</li>
					</ul>
				</div>
			</li>
			<!-- Nav item -->
			<li class="nav-item">
				<a class="nav-link has-arrow " href="./pages/profile-followers.html">
					<i data-feather="edit" class="nav-icon me-2 icon-xxs"></i>
					<span data-translate="Mini-games"> Desafíos</span>
				</a>
			</li>
			<!-- Nav item -->
			<li class="nav-item">
				<a class="nav-link   collapsed  "
					href="#!"
					data-bs-toggle="collapse"
					data-bs-target="#navprofilePages"
					aria-expanded="false"
					aria-controls="navprofilePages"
					>
					<i data-feather="user" class="nav-icon me-2 icon-xxs"></i>
					<span data-translate="Didactic-resources"> Recursos didácticos</span>
				</a>
				<div id="navprofilePages" class="collapse " data-bs-parent="#sideNavbar">
					<ul class="nav flex-column">
						<li class="nav-item">
							<a class="nav-link " href="./pages/profile-files.html">
								<span data-translate="Material">Material</span>
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link " href="./pages/profile-overview.html">
								<span data-translate="Information">Información</span>
							</a>
						</li>
					</ul>
				</div>
			</li>
			<!-- Nav item -->
			<li class="nav-item">
				<a class="nav-link "
					href="./pages/starter.html">
                    <i data-feather="settings" class="nav-icon me-2 icon-xxs" ></i>
					<span data-translate="Settings"> Ajustes</span>
				</a>
			</li>
			<!-- Nav item -->
        </ul>
    </div>
</div>

        </div>


        <!-- Page content -->
        <div id="app-content">

            <!-- Container fluid -->

            <div class="app-content-area">
                <div class="bg-primary pt-10 pb-21 mt-n6 mx-n4"></div>
                <div class="container-fluid mt-n22 ">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-12">
                            <!-- Page header -->
                            <div class="d-flex justify-content-between align-items-center mb-5">
                                <div class="mb-2 mb-lg-0">
                                    <h3 id="nombreprofesorInicio" class="mb-0  text-white" data-translate=""></h3>
                                </div>
								<div>
                                    <a href="#" id="actualizar-datos" class="btn btn-white" data-translate="Update-data">Actualizar Datos</a>
									<div class="modal fade" id="modalConfirmacionActualizacion" tabindex="-1" role="dialog" aria-labelledby="modalConfirmacionActualizacionTitle" aria-hidden="true">
									  <div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
										  <div class="modal-header">
											<h5 class="modal-title" id="modalConfirmacionActualizacionTitle" data-translate="Update-complete">Actualización Completada</h5>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										  </div>
										  <div class="modal-body" data-translate="Metrics-successfully-updated">
											Las métricas han sido actualizadas exitosamente.
										  </div>
										  <div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-translate="Close">Cerrar</button>
										  </div>
										</div>
									  </div>
									</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-3 col-lg-6 col-md-12 col-12 mb-5">
                            <!-- card -->
                            <div class="card h-100 card-lift">
                                <!-- card body -->
                                <div class="card-body">
                                    <!-- heading -->
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h4 class="mb-0" data-translate="Students">Alumn@s</h4>
                                        </div>
                                        <div class="icon-shape icon-md bg-primary-soft text-primary rounded-2">
                                            <i  data-feather="users" height="20" width="20"></i>
                                        </div>
                                    </div>
                                    <div class="lh-1">
                                        <h1 id="contador-alumnos" class=" mb-1 fw-bold"></h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-md-12 col-12 mb-5">
                            <!-- card -->
                            <div class="card h-100 card-lift">
                                <!-- card body -->
                                <div class="card-body">
                                    <!-- heading -->
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h4 class="mb-0" data-translate="Top-question">Top preguntas acertadas</h4>
                                        </div>
                                        <div class="icon-shape icon-md bg-primary-soft text-primary rounded-2">
											<i  data-feather="list" height="20" width="20"></i>
                                        </div>
                                    </div>
                                    <div class="lh-1">
                                        <h3 id="ranking" class="  mb-1 fw-bold"></h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-md-12 col-12 mb-5">
                            <!-- card -->
                            <div class="card h-100 card-lift">
                                <!-- card body -->
                                <div class="card-body">
                                    <!-- heading -->
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h4 class="mb-0" data-translate="Top-time">Top tiempo de uso</h4>
                                        </div>
                                        <div class="icon-shape icon-md bg-primary-soft text-primary rounded-2">
											<i  data-feather="clock" height="20" width="20"></i>
                                        </div>
                                    </div>
                                    <div class="lh-1">
                                        <h3 id="ranking-tiempo-de-juego" class="  mb-1 fw-bold"></h3>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-xl-3 col-lg-6 col-md-12 col-12 mb-5">
                            <!-- card -->
                            <div class="card h-100 card-lift">
                                <!-- card body -->
                                <div class="card-body">
                                    <!-- heading -->
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h4 class="mb-0" data-translate="Top-progress">Top Estrellas</h4>
                                        </div>
                                        <div class="icon-shape icon-md bg-primary-soft text-primary rounded-2">
											<i  data-feather="target" height="20" width="20"></i>
                                        </div>
                                    </div>
                                    <!-- project number -->
                                    <div class="lh-1">
                                        <h3 id="ranking-nivel-actual" class="  mb-1 fw-bold"></h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row ">
                        <div class="col-xl-8 col-12 mb-5">
                            <!-- card  -->
                            <div class="card">
                                <!-- card header  -->
                                <div class="card-header ">
                                    <h4 class="mb-0" data-translate="Students">Alumn@s</h4>
                                </div>
                                <!-- table  -->
                                <div class="card-body">
                                <div class="table-responsive table-card">
                                    <table id="tabla-alumnos" class="table text-nowrap mb-0 table-centered table-hover" >
                                        <thead class="table-light">
                                            <tr >
                                                <th data-translate="Name">Nombre</th>
                                                <th data-translate="Minutes">Avatar</th>
                                                <th data-translate="Range">Rango</th>
                                                <th data-translate="Avatar">Estrellas</th>
                                                <th data-translate="Progress">Tiempo de Uso</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                                <!-- card footer  -->
                                <div class="card-footer text-center">
                                    <a href="pages/project-files.html" class="btn btn-primary" data-translate="Show-students">Mostrar todos los alumnos</a>
                                </div>
                            </div>

                        </div>
                        <div class="col-xl-4 col-lg-12 col-md-12 col-12 mb-5 ">
                            <!-- card  -->
                            <div class="card h-100">
                                <!-- card body  -->
                                <div class="card-header d-flex align-items-center justify-content-between">
                                    <div>
                                        <h4 class="mb-0" data-translate="Group-performance">Rendimiento grupal </h4>
                                    </div>
                                </div>
                                <div class="card-body" style="align-content: center !important;">

                                    <!-- chart  -->
                                    <div class="mb-6">
                                        <div id="perfomanceChart" style="min-height: 280px !mportant; margin-bottom: 50px !important;"></div>
                                    </div>
                                    <div class="d-flex align-items-center justify-content-around">
                                        <div class="text-center">
                                            <i class="icon-sm text-success" data-feather="check-circle"></i>
                                            <h1 id="tasaPromedioGrupal" class="fs-2 mb-0 "></h1>
                                            <p data-translate="Success-rate">Estrellas Totales</p>
                                        </div>
                                        <div class="text-center">
                                            <i class="icon-sm text-warning" data-feather="trending-up"></i>
                                            <h1 id="media-progreso-creacion" class="fs-2 mb-0 "></h1>
                                            <p data-translate="Creation-progress">Progreso Medio</p>
                                        </div>
                                        <div class="text-center">
                                            <i class="icon-sm text-danger" data-feather="clock"></i>
                                            <h1 id="tiempo-promedio-de-juego" class="fs-2 mb-0 "></h1>
                                            <p data-translate="Game-Time">Experiencia Total</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
	<!-- Libs JS -->
<script src="./node_modules/jquery/dist/jquery.min.js"></script>
<script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="./node_modules/feather-icons/dist/feather.min.js"></script>
<script src="./node_modules/simplebar/dist/simplebar.min.js"></script>




<!-- Theme JS -->
<!-- build:js ./assets/js/theme.min.js -->
<script src="./assets/js/main.js"></script>
<script src="./assets/js/feather.js"></script>
<script src="./assets/js/darkMode.js"></script>
<!-- endbuild -->
    <script src="./node_modules/apexcharts/dist/apexcharts.min.js"></script>
    <script src="./assets/js/vendors/chart.js"></script>
	

    <script>
        var licenciaProfe = localStorage.getItem("licenciaProfe");
		var nombreProfe = localStorage.getItem("nombreProfe");
		var centroeducativoProfe = localStorage.getItem("centroeducativoProfe");
		var emailProfe = localStorage.getItem("emailProfe");
		var fechaExpira = localStorage.getItem("fechaexpiracion");
		var idCentro = parseInt(localStorage.getItem("idCentroProfe"));
		var idClase = localStorage.getItem("idClaseProfe");
		
		const clases = {
			"4a": { nombre: "4º ESO", grupo: " A" },
			"4b": { nombre: "4º ESO", grupo: " B" },
			"4c": { nombre: "4º ESO", grupo: " C" },
			"4d": { nombre: "4º ESO", grupo: " D" },
			"1BachA": { nombre: "1º Bachillerato", grupo: " A" },
			"1BachB": { nombre: "1º Bachillerato", grupo: " B" },
			"1BachC": { nombre: "1º Bachillerato", grupo: " C" },
			"1BachD": { nombre: "1º Bachillerato", grupo: " D" },
			"2BachA": { nombre: "2º Bachillerato", grupo: " A" },
			"2BachB": { nombre: "2º Bachillerato", grupo: " B" },
			"2BachC": { nombre: "2º Bachillerato", grupo: " C" },
			"2BachD": { nombre: "2º Bachillerato", grupo: " D" },
		};
		
		var claseInfo = clases[idClase];
		console.log("Valor de idClase:", idClase);
		var idclasenombre = claseInfo ? claseInfo.nombre : "Clase no encontrada";
		var idclasegrupo = claseInfo ? claseInfo.grupo : "";
        
        if (licenciaProfe) {
            document.getElementById("nombreprofesorInicio").textContent = "¡Hola " + nombreProfe + "! | " + centroeducativoProfe + " | " + idclasenombre + " " + idclasegrupo;
        }
    </script>
	<script>
		function cerrarSesion() {
			localStorage.removeItem("tokenUsuario");
			window.location.href = 'pages/login.html';
		}

		document.addEventListener('DOMContentLoaded', function() {
			var botonCerrarSesion = document.getElementById('cerrar-sesion');
			if (botonCerrarSesion) {
				botonCerrarSesion.addEventListener('click', cerrarSesion);
			}
		});
	</script>
	<script type="module" src="external/dist/bundle.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			if (window.contarAlumnos) {
				window.contarAlumnos();
			}
			if (window.mostrarRanking) {
				window.mostrarRanking();
			}
			if (window.mostrarRankingTiempoDeJuego) {
				window.mostrarRankingTiempoDeJuego();
			}
			if (window.mostrarRankingNivelActual) {
				window.mostrarRankingNivelActual();
			}
			if (window.calcularMediaPreguntasYTasaDeAcierto) {
				window.calcularMediaPreguntasYTasaDeAcierto();
			}
			if (window.calcularMediaProgresoCreacion) {
				window.calcularMediaProgresoCreacion();
			}
			if (window.calcularTiempoPromedioDeJuego) {
				window.calcularTiempoPromedioDeJuego();
			}
		});
	</script>

</body>

</html>